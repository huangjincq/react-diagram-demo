(this["webpackJsonpreact-mind-map"]=this["webpackJsonpreact-mind-map"]||[]).push([[0],{120:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),o=n.n(c),r=n(29),i=n.n(r),u=(n(120),n(31)),s=n(7),l=n(24),d=n(49),b={canvasRef:null,portRefs:{},nodeRefs:{},scale:1},j=Object(c.createContext)(b),f=j.Provider,O=function(){return Object(c.useContext)(j).scale},p=o.a.memo((function(e){var t=e.children,n=e.portRefs,o=e.nodeRefs,r=e.transform,i=r.scale,u=r.translateX,s=r.translateY,d=Object(c.useState)(null),b=Object(l.a)(d,2),j=b[0],O=b[1],p=Object(c.useRef)(null);return Object(c.useEffect)((function(){O(p.current)}),[]),Object(a.jsx)("div",{id:"diagram-canvas",className:"diagram-canvas",ref:p,style:{transform:"matrix(".concat(i,",0,0,").concat(i,",").concat(u,",").concat(s,")")},children:Object(a.jsx)(f,{value:{canvasRef:j,portRefs:n,nodeRefs:o,scale:i},children:t})})}));p.displayName="DiagramCanvas";var m=n(134),v=["INPUT","TEXTAREA"],g={ref:null,throttleBy:0},h=function(e){return[e.clientX,e.clientY]},y=function(e){return Object(c.useCallback)((function(t){e.current&&t===e.current||(e.current=t)}),[e])},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=e.ref,n=Object(c.useRef)(),a=Object(c.useRef)(),o=Object(c.useRef)(),r=Object(c.useRef)({isDragging:!1,start:[0,0],end:[0,0],offset:[0,0]}),i=r.current,u=Object(c.useCallback)((function(e){var a=e.target.tagName;i.isDragging||!(null===t||void 0===t?void 0:t.current.contains(e.target))||v.includes(a)||(i.isDragging=!0,i.end=[0,0],i.offset=[0,0],i.start=h(e),n.current&&n.current(e,Object(s.a)({},i)))}),[t,i,n]),l=Object(c.useCallback)(Object(m.a)((function(e){i.isDragging&&(i.offset=[i.start[0]-e.clientX,i.start[1]-e.clientY],a.current&&a.current(e,Object(s.a)({},i)))}),e.throttleBy),[t,i,a]),d=Object(c.useCallback)((function(e){i.isDragging&&(i.isDragging=!1,i.end=h(e),o.current&&o.current(e,Object(s.a)({},i)))}),[i,o]);return Object(c.useEffect)((function(){var e=function(e){return u(e)},n=function(e){return l(e)},a=function(e){return d(e)};return(null===t||void 0===t?void 0:t.current)&&(t.current.addEventListener("mousedown",e),document.addEventListener("mousemove",n),document.addEventListener("mouseup",a)),function(){(null===t||void 0===t?void 0:t.current)&&(t.current.removeEventListener("mousedown",e),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",a))}}),[t,u,l,d]),{ref:t,onDragStart:y(n),onDrag:y(a),onDragEnd:y(o)}},C=n(133),N=(n(69),function(e){var t=e.icon,n=e.label;return Object(a.jsxs)("h4",{className:"node-header",children:[t&&Object(a.jsx)("div",{className:"node-header-icon",children:o.a.createElement(t)}),Object(a.jsx)("div",{className:"node-header-text",children:n})]})});N.displayName="NodeTypeHeader";var k=function(e){var t=e.value,n=e.onChange;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{icon:L.nodeTypeInput.icon,label:L.nodeTypeInput.label}),Object(a.jsx)(C.a,{value:t.inputValue,onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{inputValue:e.target.value}))},placeholder:"Basic usage"})]})};k.displayName="NodeTypeInput";var D=n(130),R=function(e){var t=e.value,n=e.onChange;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{icon:L.nodeTypeSelect.icon,label:L.nodeTypeSelect.label}),Object(a.jsxs)(D.a,{style:{width:120},value:t.selectValue,onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{selectValue:e}))},children:[Object(a.jsx)(D.a.Option,{value:"jack",children:"Jack"}),Object(a.jsx)(D.a.Option,{value:"lucy",children:"Lucy"}),Object(a.jsx)(D.a.Option,{value:"disabled",disabled:!0,children:"Disabled"}),Object(a.jsx)(D.a.Option,{value:"Yiminghe",children:"yiminghe"})]})]})};R.displayName="NodeTypeSelect";var S=n(112),T=function(e){var t=e.value;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{icon:L.nodeTypeButton.icon,label:L.nodeTypeButton.label}),t.buttonList.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(S.a,{style:{width:"100%"},children:e.text})},t)}))]})};T.displayName="NodeTypeButton";var E=n(137),M=n(138),I=n(135),L={nodeTypeInput:{component:k,label:"Input \u8282\u70b9",icon:E.a,defaultData:{inputValue:"test"}},nodeTypeSelect:{component:R,label:"Select \u8282\u70b9",icon:M.a,defaultData:{selectValue:""}},nodeTypeButton:{component:T,label:"Button \u8282\u70b9",icon:M.a,defaultData:{selectValue:""}}},w=Object.entries(L).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(s.a)(Object(s.a)({},a),{},{type:n})})),P=n(132),B=function e(t){if(!t)return null;var n=t.id,a=t.classList.contains("diagram-node");return n&&a?n:a?null:e(t.parentElement)},Y=n(5),A=n.n(Y),F=o.a.memo((function(e){var t=e.id,n=e.isLinked,o=e.index,r=e.nodeId,i=e.onDragNewSegment,u=e.onSegmentFail,s=e.onSegmentConnect,l=e.onPortMount,d=e.type,b=Object(c.useContext)(j).canvasRef,f=O(),p=Object(c.useRef)(null),m=Object(c.useRef)(),v=A()("diagram-port",{"type-input":"input"===d,"type-output":"output"===d,"is-linked":n}),g=x({ref:p,throttleBy:15}),h=g.onDragStart,y=g.onDrag,C=g.onDragEnd;return h((function(e){if(e.stopImmediatePropagation(),e.stopPropagation(),b&&p.current){var t=b.getBoundingClientRect(),n=t.x,a=t.y,c=p.current.getBoundingClientRect(),o=c.x,r=c.y,i=c.width,u=c.height;m.current=[(o-n+i/2)/f,(r-a+u/2)/f]}})),y((function(e){if(m.current){e.stopImmediatePropagation(),e.stopPropagation();var n=function(e,t,n){var a=(null===t||void 0===t?void 0:t.getBoundingClientRect())||{x:0,y:0};return[(e.clientX-a.x)/n,(e.clientY-a.y)/n]}(e,b,f);i(t,m.current,n)}})),C((function(e){var n=e.target;if(n.classList.contains("diagram-port")&&n.id!==t)s(t,n.id);else{var a=B(e.target);a&&a!==r?s(t,a):u&&u(t,d)}})),Object(c.useEffect)((function(){l(t,p.current)}),[t,l]),Object(a.jsx)("div",{className:v,id:t,ref:p,style:{top:0===o?"45%":"calc(45% + ".concat(18*o,"px)")}})})),H=function(e){var t=e.inputs,n=e.onPortMount,c=e.onDragNewSegment,o=e.onSegmentFail,r=e.onSegmentConnect,i=e.nodeId,u=e.type;return Object(a.jsx)(a.Fragment,{children:t.map((function(e,t){return Object(a.jsx)(F,{onPortMount:n,onDragNewSegment:c,onSegmentFail:o,onSegmentConnect:r,type:u,id:e.id,index:t,isLinked:e.isLinked,nodeId:i},e.id)}))})};H.displayName="DiagramNodePorts";var X=o.a.memo((function(e){var t,n=e.nodeInfo,r=e.onNodeValueChange,i=e.onNodePositionChange,u=e.onPortMount,l=e.onDragNewSegment,d=e.onNodeMount,b=e.onSegmentFail,j=e.onSegmentConnect,f=e.onAddHistory,p=e.activeNodeIds,m=n.id,v=n.coordinates,g=n.type,h=n.inputs,y=n.data,C=n.outputs,N=O(),k=null===(t=L[g])||void 0===t?void 0:t.component,D={value:y,onChange:function(e){r(m,e)}},R=Object(c.useRef)(null),S=x({throttleBy:14,ref:R}),T=S.onDragStart,E=S.onDrag,M=S.onDragEnd,I=Object(c.useRef)(v);T((function(){I.current=v})),E((function(e,t){e.stopImmediatePropagation(),e.stopPropagation();var n=[I.current[0]-t.offset[0]/N,I.current[1]-t.offset[1]/N];i(m,n)})),M((function(e){Object(P.a)(I.current,v)||f(m,I.current)}));var w={nodeId:m,onPortMount:u,onDragNewSegment:l,onSegmentFail:b,onSegmentConnect:j};Object(c.useEffect)((function(){d(m,R.current)}),[m,d]);var B=Object(c.useMemo)((function(){return A()("diagram-node",{active:p.includes(m)})}),[p,m]);return Object(a.jsxs)("div",{id:m,className:B,ref:R,style:{left:v[0],top:v[1]},children:[k&&o.a.createElement(k,D),Object(a.jsx)(H,Object(s.a)(Object(s.a)({inputs:h},w),{},{type:"input"})),Object(a.jsx)(H,Object(s.a)(Object(s.a)({inputs:C},w),{},{type:"output"}))]})}));X.displayName="DiagramNode";var V=o.a.memo((function(e){var t=e.nodes;return Object(a.jsx)(a.Fragment,{children:t.map((function(t){return Object(a.jsx)(X,Object(s.a)({nodeInfo:t},e),t.id)}))})}));V.displayName="NodesCanvas";var U=function(e){return[Math.floor(e[0]),Math.floor(e[1])]},_=function(e,t){var n,a=[(t[0]+e[0])/2,e[1]],c=[(t[0]+e[0])/2,t[1]];return"M ".concat(e[0],",").concat(e[1]," C ").concat((n=[a,c],n.map((function(e){return"".concat(e[0],",").concat(e[1])})).join(" "))," ").concat(t[0],",").concat(t[1])},W=function(e,t){var n=(e[0]+t[0])/2,a=(e[1]+t[1])/2;return"M".concat(e[0],",").concat(e[1]," ").concat(e[0]+20,",").concat(e[1]," C ").concat(e[0]+100,",").concat(e[1]," ").concat(e[0]+130,",").concat((a+e[1])/2,"  ").concat(n,",").concat(a," C ").concat(n,",").concat(a," ").concat(t[0]-130,",").concat((a+t[1])/2," ").concat(t[0]-2,",").concat(t[1]," M ").concat(t[0]-2,",").concat(t[1]," ").concat(t[0],",").concat(t[1])},J=function(e,t){if(!e||!t)return"";var n,a,c=U(e),o=U(t);return n=c,(a=o)[0]>=n[0]+40||Math.abs(a[1]-n[1])<=40?_(n,a):W(n,a)},K=o.a.memo((function(e){var t=e.position;return Object(a.jsx)("foreignObject",{x:t[0],y:t[1],children:Object(a.jsx)("div",{className:"bi-diagram-link-label",children:"label"})})}));K.displayName="LinkDelete";var q=function(e,t,n,a){if(e&&"node"===e.type&&n[e.id]){var c=n[e.id];return[e.coordinates[0],e.coordinates[1]+c.offsetHeight/2]}if(e&&t&&t[e.id]){var o=t[e.id],r=e.coordinates;return[r[0]+o.offsetLeft+o.offsetWidth/2,r[1]+o.offsetTop+o.offsetHeight/2]}},z=o.a.memo((function(e){var t=e.input,n=e.output,o=e.link,r=e.onDelete,i=Object(c.useRef)(null),u=Object(c.useState)(),s=Object(l.a)(u,2),d=s[0],b=s[1],f=Object(c.useContext)(j),O=f.canvasRef,p=f.portRefs,m=f.nodeRefs,v=Object(c.useMemo)((function(){return q(t,p,m)}),[t,p,m,O]),g=Object(c.useMemo)((function(){return q(n,p,m)}),[n,p,m,O]),h=Object(c.useMemo)((function(){return J(v,g)}),[v,g]);Object(c.useEffect)((function(){v&&g&&i.current&&b(function(e){if(e.getTotalLength&&e.getPointAtLength){var t=e.getTotalLength()/2,n=e.getPointAtLength(t);return[n.x,n.y]}return[0,0]}(i.current))}),[i,v,g]);var y=Object(c.useCallback)((function(){r(o)}),[r,o]);return Object(a.jsxs)("g",{className:"diagram-link",children:[Object(a.jsx)("path",{d:h,className:"bi-link-ghost",onDoubleClick:y}),Object(a.jsx)("path",{d:h,ref:i,className:"bi-link-path",onDoubleClick:y}),d&&Object(a.jsx)(K,{position:d})]})})),G=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id===t)return{type:"node",coordinates:a.coordinates,id:t};for(var c=0;c<a.inputs.length;c++){if(a.inputs[c].id===t)return{type:"port",coordinates:a.coordinates,id:t}}for(var o=0;o<a.outputs.length;o++){if(a.outputs[o].id===t)return{type:"port",coordinates:a.coordinates,id:t}}}},Q=o.a.memo((function(e){var t=e.nodes,n=e.onChange,o=e.links,r=Object(c.useCallback)((function(e){if(o.length>0&&n){var t=o.filter((function(t){return!Object(P.a)(t,e)}));n(t)}}),[o,n]);return Object(a.jsx)("svg",{className:"diagram-link-canvas",children:o&&o.map((function(e){return Object(a.jsx)(z,{link:e,input:G(t,e.input),output:G(t,e.output),onDelete:r},"".concat(e.input,"-").concat(e.output))}))})}));Q.displayName="LinksCanvas";var Z=o.a.memo((function(e){var t=e.segment,n=t.from,o=t.to,r=t.id,i=Object(c.useMemo)((function(){return J(n,o)}),[n,o]);return Object(a.jsx)("svg",{className:"diagram-segment-canvas",children:Object(a.jsxs)("g",{className:"diagram-segment-link",id:r,children:[Object(a.jsx)("path",{d:i}),Object(a.jsx)("circle",{r:"5",cx:o[0],cy:o[1]})]})})}));Z.displayName="Segment";n(123);var $=n(129),ee=o.a.memo((function(e){var t=e.value,n=e.onChange,o=e.onAddHistory,r=e.transform,i=e.activeNodeIds,d=Object(c.useState)(),b=Object(l.a)(d,2),j=b[0],f=b[1],O=Object(c.useRef)({}).current,m=Object(c.useRef)({}).current,v=Object(c.useCallback)((function(e,t,n){f({id:"segment-".concat(e),from:t,to:n})}),[]),g=Object(c.useCallback)((function(){f(void 0)}),[]);return Object(a.jsxs)(p,{portRefs:O,nodeRefs:m,transform:r,children:[Object(a.jsx)(V,{nodes:t.nodes,onNodeMount:function(e,t){m[e]=t},onPortMount:function(e,t){O[e]=t},onDragNewSegment:v,onSegmentFail:g,onNodePositionChange:function(e,a){var c=Object(u.a)(t.nodes),o=c.findIndex((function(t){return t.id===e}));c[o].coordinates=a,n(Object(s.a)(Object(s.a)({},t),{},{nodes:c}),!0)},onNodeValueChange:function(e,a){var c=Object($.a)(t.nodes),o=c.findIndex((function(t){return t.id===e}));c[o].data=a,n(Object(s.a)(Object(s.a)({},t),{},{nodes:c}))},onSegmentConnect:function(e,a){var c=[].concat(Object(u.a)(t.links),[{input:e,output:a}]);n(Object(s.a)(Object(s.a)({},t),{},{links:c})),f(void 0)},onAddHistory:function(e,n){var a=Object($.a)(t.nodes),c=a.findIndex((function(t){return t.id===e}));a[c].coordinates=n,o(Object(s.a)(Object(s.a)({},t),{},{nodes:a}))},activeNodeIds:i}),Object(a.jsx)(Q,{nodes:t.nodes,links:t.links,onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{links:e}))}}),j&&Object(a.jsx)(Z,{segment:j})]})})),te={past:[],present:null,future:[]},ne=function(e,t){var n=e.past,a=e.present,c=e.future,o=t.newPresent;switch(t.type){case"UNDO":var r=n[n.length-1];return{past:n.slice(0,n.length-1),present:r,future:[a].concat(Object(u.a)(c))};case"REDO":var i=c[0],l=c.slice(1);return{past:[].concat(Object(u.a)(n),[a]),present:i,future:l};case"SET":return{past:Object(u.a)(n),present:o,future:[]};case"SET_WIDTH_HISTORY":return o===a?e:{past:[].concat(Object(u.a)(n),[a]),present:o,future:[]};case"ADD_A_HISTORY":return o===a?e:{past:[].concat(Object(u.a)(n),[o]),present:a,future:[]};case"CLEAR":var d=t.initialPresent;return Object(s.a)(Object(s.a)({},te),{},{present:d})}},ae=n(136),ce=(n(124),[{text:"\u6eda\u8f6e\u653e\u5927\u7f29\u5c0f",value:1},{text:"\u7a7a\u683c + \u9f20\u6807\u62d6\u52a8",value:2}]),oe=function(e){var t=e.undo,n=e.redo,o=e.canUndo,r=e.canRedo,i=e.scale,u=Object(c.useMemo)((function(){return Object(a.jsx)("div",{children:ce.map((function(e){return Object(a.jsx)("div",{className:"scale-item",children:e.text},e.value)}))})}),[]);return Object(a.jsxs)("div",{className:"toolbar",children:[Object(a.jsx)(S.a,{disabled:!o,onClick:t,children:"\u64a4\u9500"}),Object(a.jsx)(S.a,{disabled:!r,onClick:n,children:"\u91cd\u505a"}),Object(a.jsx)(ae.a,{placement:"right",content:u,overlayClassName:"scale-popover",children:Object(a.jsx)(S.a,{children:"\u5feb\u6377\u952e"})}),Object(a.jsxs)(S.a,{children:[100*i,"%"]})]})},re=(n(97),o.a.memo((function(e){var t=e.icon,n=e.label,r=e.type,i=Object(c.useCallback)((function(e){e.dataTransfer&&e.dataTransfer.setData("nodeType",r)}),[r]);return Object(a.jsxs)("div",{className:"node-list-item",draggable:!0,onDragStart:i,children:[t&&o.a.createElement(t),Object(a.jsx)("div",{className:"node-list-text",children:n})]})})));re.displayName="NodeListItem";var ie,ue=function(){return Object(a.jsx)("div",{className:"node-list",children:w.map((function(e){return Object(a.jsx)(re,{icon:e.icon,type:e.type,label:e.label},e.type)}))})};ue.displayName="NodeList";var se={nodes:[{id:"node-1",coordinates:[100,150],inputs:[],outputs:[{id:"port-1",isLinked:!0}],type:"nodeTypeInput",data:{inputValue:"defaultValue"}},{id:"node-2",type:"nodeTypeSelect",coordinates:[400,200],inputs:[{id:"input-1",isLinked:!1}],outputs:[{id:"port-5",isLinked:!1}],data:{selectValue:""}},{id:"node-3",type:"nodeTypeButton",coordinates:[700,300],inputs:[],outputs:[{id:"port-6",isLinked:!1},{id:"port-7",isLinked:!1}],data:{buttonList:[{text:"button-1",id:"port-6"},{text:"button-2",id:"port-7"}]}}],links:[{input:"port-1",output:"node-2"}]},le=.1,de="DEFAULT",be="START",je="MOVE",fe="SELECTION",Oe=(ie={},Object(d.a)(ie,de,"default"),Object(d.a)(ie,fe,"default"),Object(d.a)(ie,be,"grab"),Object(d.a)(ie,je,"grabbing"),ie);var pe=function(){var e=function(e){var t=Object(c.useReducer)(ne,Object(s.a)(Object(s.a)({},te),{},{present:e})),n=Object(l.a)(t,2),a=n[0],o=n[1],r=0!==a.past.length,i=0!==a.future.length,u=Object(c.useCallback)((function(){r&&o({type:"UNDO"})}),[r,o]),d=Object(c.useCallback)((function(){i&&o({type:"REDO"})}),[i,o]),b=Object(c.useCallback)((function(e){return o({type:"SET",newPresent:e})}),[o]),j=Object(c.useCallback)((function(e){return o({type:"SET_WIDTH_HISTORY",newPresent:e})}),[o]),f=Object(c.useCallback)((function(e){return o({type:"ADD_A_HISTORY",newPresent:e})}),[o]),O=Object(c.useCallback)((function(){return o({type:"CLEAR",initialPresent:e})}),[o,e]);return{value:a.present,set:b,setWithHistory:j,addAHistory:f,undo:u,redo:d,clear:O,canUndo:r,canRedo:i}}(se),t=e.value,n=e.set,o=e.setWithHistory,r=e.addAHistory,i=e.undo,d=e.redo,b=e.canUndo,j=e.canRedo,f=Object(c.useState)({scale:1,translateX:0,translateY:0}),O=Object(l.a)(f,2),p=O[0],v=O[1],g=Object(c.useState)(),h=Object(l.a)(g,2),y=h[0],x=h[1],C=Object(c.useState)(de),N=Object(l.a)(C,2),k=N[0],D=N[1],R=Object(c.useRef)(),S=Object(c.useState)([]),T=Object(l.a)(S,2),E=T[0],M=T[1],w=Object(c.useRef)(1),P=Object(c.useRef)(null),B=Object(c.useRef)(null),Y=Object(c.useCallback)((function(e,t){t?n(e):o(e)}),[n,o]),A=Object(c.useCallback)((function(e){r(e)}),[r]),F=Object(c.useCallback)((function(e){var n;e&&(e=window.event);var a=e.dataTransfer.getData("nodeType"),c=e.clientX,o=e.clientY,r=(null===(n=document.getElementById("diagram-canvas"))||void 0===n?void 0:n.getBoundingClientRect())||{x:0,y:0},i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return{id:Object(I.a)(),coordinates:n,type:e,inputs:[],outputs:[{id:Object(I.a)(),disabled:!1}],data:(null===(t=L[e])||void 0===t?void 0:t.defaultData)||{}}}(a,[(c-r.x)/p.scale,(o-r.y)/p.scale]);Y(Object(s.a)(Object(s.a)({},t),{},{nodes:[].concat(Object(u.a)(t.nodes),[i])}))}),[Y,p,t]),H=Object(c.useCallback)((function(e){e.preventDefault()}),[]),X=Object(c.useCallback)((function(e){e||(e=window.event);var t=e.nativeEvent.wheelDelta,n=p.scale,a=p.translateX,c=p.translateY,o=w.current,r=(e.clientX-a)/n,i=(e.clientY-c)/n;t<0&&(o-=le,a+=r*le,c+=i*le),t>0&&(o+=le,a-=r*le,c-=i*le),o>1||o<.1||(w.current=Number(o.toFixed(2)),v({scale:w.current,translateX:a,translateY:c}))}),[p]),V=Object(c.useCallback)((function(e){R.current={x:e.clientX,y:e.clientY},function(e,t){return e.target===t||e.target===(null===t||void 0===t?void 0:t.firstChild)}(e,P.current)&&D(k===be?je:fe)}),[k]),U=Object(c.useCallback)(Object(m.a)((function(e){if(R.current&&P.current){var n=P.current.getBoundingClientRect();x({left:Math.min(e.clientX,R.current.x)-n.x,top:Math.min(e.clientY,R.current.y)-n.y,width:Math.abs(e.clientX-R.current.x),height:Math.abs(e.clientY-R.current.y)});var a=B.current,c=t.nodes.map((function(e){return e.id})).filter((function(e){return function(e,t){if(e&&t){var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),c=Math.max(n.x+n.width,a.x+a.width),o=Math.max(n.y+n.height,a.y+a.height),r=Math.min(n.x,a.x),i=Math.min(n.y,a.y);return c-r<=n.width+a.width&&o-i<=n.height+a.height}return!1}(a,document.getElementById(e))}));M(c)}}),20),[p,t]),_=Object(c.useCallback)((function(e){D(k===je?be:de),x(void 0),R.current=void 0}),[k]),W=Object(c.useCallback)(Object(m.a)((function(e){R.current&&v(Object(s.a)(Object(s.a)({},p),{},{translateX:e.clientX-R.current.x+p.translateX,translateY:e.clientY-R.current.y+p.translateY}))}),20),[p,v]),J=Object(c.useCallback)((function(e){k===je&&W(e),k===fe&&U(e)}),[k,U,W]),K=Object(c.useCallback)((function(e){32===e.keyCode&&k===de&&D(be)}),[k]),q=Object(c.useCallback)((function(e){32===e.keyCode&&D(de)}),[]),z=Object(c.useMemo)((function(){return Oe[k]}),[k]),G=Object(c.useMemo)((function(){return k!==fe}),[k]),Q=Object(c.useMemo)((function(){return{left:null===y||void 0===y?void 0:y.left,top:null===y||void 0===y?void 0:y.top,width:null===y||void 0===y?void 0:y.width,height:null===y||void 0===y?void 0:y.height}}),[y]);return Object(a.jsxs)("div",{ref:P,className:"diagram-panel",onDrop:F,onDragEnter:H,onDragOver:H,tabIndex:1,onWheel:X,onMouseDown:V,onMouseMove:J,onMouseUp:_,onKeyDown:K,onKeyUp:q,style:{cursor:z},children:[Object(a.jsx)(ee,{value:t,transform:p,onChange:Y,onAddHistory:A,activeNodeIds:E}),Object(a.jsx)(ue,{}),Object(a.jsx)(oe,{undo:i,redo:d,canUndo:b,scale:p.scale,canRedo:j}),Object(a.jsx)("div",{ref:B,className:"diagram-selection-area",hidden:G,style:Q})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(pe,{})}),document.getElementById("root")),me()},69:function(e,t,n){},97:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.5e7dbab6.chunk.js.map